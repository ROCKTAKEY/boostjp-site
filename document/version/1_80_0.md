# Boost 1.80.0リリースノート

本家リリースノート：

- <https://github.com/boostorg/website/blob/master/feed/history/boost_1_80_0.qbk>
- <http://www.boost.org/users/history/version_1_80_0.html>


リポジトリは以下：

- <https://github.com/boostorg/>


リポジトリからのビルド方法は、egtraさんのブログを参照：

- 「[Modularized Boost（GitHubへ移行したリポジトリ）を使用する](http://dev.activebasic.com/egtra/2013/12/03/620/)」


## 更新ライブラリ

- [Atomic](#atomic)
- [Filesystem](#filesystem)
- [GIL](#gil)
- [Histogram](#histogram)
- [Iterator](#iterator)
- [JSON](#json)
- [LEAF](#leaf)
- [Locale](#locale)
- [Log](#log)


## <a id="atomic" href="#atomic">Atomic</a>

- [GitHub #59](https://github.com/boostorg/atomic/issues/59) ARM, AArch32, AArch64ターゲット向けのエンディアンチェックの移植性を改善
- [GitHub #61](https://github.com/boostorg/atomic/issues/61) MSVC 14.0 (Visual Studio 2015) のC++17 modeでのコンパイルを修正


## <a id="filesystem" href="#filesystem">Filesystem</a>

- [GitHub #234](https://github.com/boostorg/filesystem/issues/234) Windowsにおいて、`ERROR_ACCESS_DENIED`エラーでファイルを開くことができない場合にファイル属性をクエリするためのフォールバック実装を追加。これにより、再解析ポイントまたはシンボリックリンクではないシステムファイルおよびディレクトリに対して、`status`および`symlink_status`が成功する可能性がある
- [GitHub #236](https://github.com/boostorg/filesystem/issues/236)、[GitHub #237](https://github.com/boostorg/filesystem/issues/237) Windowsにおいて、ファイル属性のクエリ時に`ERROR_INVALID_PARAMETER`を生成するFAT/exFATファイルシステムの回避策を追加。これは、ファイルが存在しないことを報告する`status`と`symlink_status`、構築に失敗したdirectory iterator、およびその他の依存操作に影響する
- [GitHub #240](https://github.com/boostorg/filesystem/pull/240) [RTEMS](https://www.rtems.org/)でのコンパイルの問題を回避
- Linuxにおいて、実行時に`copy_file_range`が`ENOSYS`で失敗した場合の`sendfile`、`copy_file`実装への切り替えを修正。 `sendfile`フォールバックの実装は、ファイルシステムタイプのチェックをスキップするために使用され、一部のファイルシステムでは失敗する可能性があった
- POSIX.1-2008およびWindows Vista以降で定義された`openat`および関連APIをサポートするPOSIXシステムにおいて、以前のリリースで実装された[CVE-2022-21658](https://www.cve.org/CVERecord?id=CVE-2022-21658)に対する`remove_all`の保護が改善さた。以前の修正では、[特定の条件](https://github.com/boostorg/filesystem/issues/224#issuecomment-1183738097)で意図しないファイルが削除される可能性があった。他のシステムは脆弱なままである



## <a id="gil" href="#gil">GIL</a>

- <span style="color:red;">**注意**</span> [GitHub #676](https://github.com/boostorg/gil/discussions/676) Boost 1.80.0の次かその次のリリースで、サポートする最小C++の言語バージョンをC++17に破壊的変更する計画をしている
- 追加
    - [GitHub #500](https://github.com/boostorg/gil/pull/500) GSoC 2020: Perona-Malik anisotropic diffusionアルゴリズムを追加
    - [GitHub #499](https://github.com/boostorg/gil/pull/499) GSoC 2020: histogramクラスと関連する機能を追加
    - [GitHub #514](https://github.com/boostorg/gil/pull/514) GSoC 2020: histogramのequalization機能を追加
    - [GitHub #515](https://github.com/boostorg/gil/pull/515) GSoC 2020: histogramのマッチングアルゴリズムを追加
    - [GitHub #506](https://github.com/boostorg/gil/pull/506) GSoC 2020: 画像を水平方向（`hstack`）または垂直方向（`vstack`）にstackする機能を追加
    - [GitHub #516](https://github.com/boostorg/gil/pull/516) GSoC 2020: Adaptive Histogram Equalization (AHE) アルゴリズムを追加
    - [GitHub #512](https://github.com/boostorg/gil/pull/512) GSoC 2020: Standard Hough Transformおよびcircle rasterizationを追加
    - [GitHub #512](https://github.com/boostorg/gil/pull/512) GSoC 2020: line rasterization向けのBresenhamのアルゴリズムを追加
    - [GitHub #565](https://github.com/boostorg/gil/pull/565) GSoC 2021: 任意の角度での画像回転を追加
    - [GitHub #585](https://github.com/boostorg/gil/pull/585) GSoC 2021: Jerry Van Aken氏の「効率的な楕円描画アルゴリズム」に基づく楕円のラスタライズサポートを追加
    - [GitHub #520](https://github.com/boostorg/gil/pull/520) `image`に変換可能なviewからの変換コンストラクタを追加
    - [GitHub #527](https://github.com/boostorg/gil/pull/527) `inverse(boost::gil::matrix3x2<T> m)`を追加
    - [GitHub #541](https://github.com/boostorg/gil/pull/541) standard morphological transformationsを追加
    - [GitHub #648](https://github.com/boostorg/gil/pull/648) `for_each_pixel`に`any_image`向けのオーバーロードを追加
    - [GitHub #529](https://github.com/boostorg/gil/pull/529) C++17 polymorphic memory resourceの`image`クラス向けtypedefを追加
- 変更
    - <span style="color:red;">**破壊的変更**</span> 最小C++言語バージョンの要求をC++11からC++14に変更した。現在、GILの大部分はまだC++11コンパイラでコンパイルされているが、その状態が維持される保証はなく、少なくともCC++14をサポートしていないコンパイラは現時点ではサポートされていないと見なされる
    - <span style="color:red;">**破壊的変更**</span> `any_color_converted_view()`を非推奨とし、将来のリリースから削除する予定。同じ機能として代わりに`color_converted_view()`を使用すること
    - <span style="color:red;">**破壊的変更**</span> [GitHub #656](https://github.com/boostorg/gil/pull/656) `any_image`向けの`apply_operation`を非推奨とし、将来のリリースから削除する予定。同じ機能として変わりに`variant2::visit`を使用すること
    - [GitHub #573](https://github.com/boostorg/gil/pull/573) numeric extensionをcoreに移動
    - [GitHub #636](https://github.com/boostorg/gil/pull/636) C++17 filesystemのサポートを追加。`BOOST_GIL_IO_USE_BOOST_FILESYSTEM`マクロを定義して強制的にBoost.Filesystemを使用しない限り、自動的にstd::filesystemを検出して使用する
    - [GitHub #655](https://github.com/boostorg/gil/pull/655) `pixel_multiply_t`を`pixel_multiplies_t`、`pixel_divide_t`を`pixel_divides_t`に名称変更
    - [GitHub #653](https://github.com/boostorg/gil/pull/653) `io/dynamic_io_new.hpp`を`io/detail/dynamic.hpp`に名称変更
    - [GitHub #653](https://github.com/boostorg/gil/pull/653) `construct_matched`関数を`boost::gil::detail`名前空間に移動した。これは、他の実装の詳細としてのみ使用されていた
    - [GitHub #679](https://github.com/boostorg/gil/pull/679) `packed_pixel`をtrivially copyableかつassignableにした
    - [GitHub #685](https://github.com/boostorg/gil/pull/685) 非推奨のlibtiff v4.3のtypedefを、C99の固定サイズ整数で置き換えた
- 削除
    - <span style="color:red;">**破壊的変更**</span> [GitHub #572](https://github.com/boostorg/gil/pull/572) GCC 5のサポートを削除
    - [GitHub #627](https://github.com/boostorg/gil/pull/627) deprecated.hppを削除
- 修正
    - [GitHub #505](https://github.com/boostorg/gil/pull/505) RGBからHSLへの変換を修正
    - [GitHub #522](https://github.com/boostorg/gil/pull/522) RGBからsigned CMYKへの変換を修正
    - [GitHub #530](https://github.com/boostorg/gil/pull/530) hsv.hppでの不要な数値キャストを削除
    - [GitHub #542](https://github.com/boostorg/gil/pull/542) `homogeneous_color_base`のピクセル要素を参照するデフォルトコンストラクタを修正
    - [GitHub #556](https://github.com/boostorg/gil/pull/556) `subchroma_image_view`でのローカルオブジェクトへの参照を返していた問題を修正
    - [GitHub #568](https://github.com/boostorg/gil/pull/568) diffusion.hppに不足していたインクルードガードを追加
    - [GitHub #526](https://github.com/boostorg/gil/pull/526) `any_image_view<>::const_t`を修正
    - [GitHub #617](https://github.com/boostorg/gil/pull/617) I/O extensionsのC++20との非互換を修正
    - [GitHub #628](https://github.com/boostorg/gil/pull/628) すべてのサンプルコードがエラーなくビルドできることを確認
    - [GitHub #577](https://github.com/boostorg/gil/pull/577) `float32_t`チャンネルモデルをもつimage向けの`convolve_2d`を修正
    - [GitHub #621](https://github.com/boostorg/gil/pull/621) 1次元以外のiterable viewに対する`for_each_pixel`を修正
    - [GitHub #650](https://github.com/boostorg/gil/pull/650) PNG I/Oでの`is_equal_to_sixteen`の不足していたテストを修正
    - [GitHub #654](https://github.com/boostorg/gil/pull/654) 2つのコンポーネントの`devicen_t`を再許可。この機能はBoost 1.72.0で削除されていた
    - [GitHub #649](https://github.com/boostorg/gil/pull/649) 空の次元での`image`クラスのメモリリークを修正
- 謝辞
    - Cypre55, Samuel Debionne, Mike-Devel, Edward Diener, Peter Dimov, Omar Emara, Dhruva Gole, Nicolas Herry, Eugene K, Avinal Kumar, Gaurav Kumar, Marco Langer, Pranam Lashkari, Mateusz Łoskot, Giovanni Mascellani, Debabrata Mandal, Gopi Krishna Menon, René Ferdinand Rivera Morell, Felix Morgner, Harshit Pant, Paul92, André Schröder, Scramjet911, Siddharth, Dirk Stolle, Prathamesh Tagore, theroyn, Olzhas Zhumabek


## <a id="histogram" href="#histogram">Histogram</a>

- (物理的または論理的に) 特定の条件下でサイズがゼロの軸を使用してヒストグラムを反復しようとしたときの`indexed`のセグメンテーション違反を修正
- 非推奨となっていたAPIを削除
    - `accumulators::thread_safe`クラス: `accumulators::count<T, true>`を使用すること
    - `accumulators::sum::large`メンバ関数と`accumulators::sum::small`メンバ関数: `accumulators::sum::large_part`メンバ関数と`accumulators::sum::small_part`を使用すること
    - 型の別名`algorithm::reduce_option`: `algorithm::reduce_command`を使用すること
    - 関数テンプレート`axis::traits::static_options`: `axis::traits::get_options`を使用すること
    - 関数テンプレート`axis::traits::static_is_inclusive`: `axis::traits::is_inclusive`を使用すること
    - 型の別名`indexed::range_iterator`: `indexed::iterator`を使用すること
    - 型の別名`indexed::accessor::reference`: `indexed::accessor::const_reference`を使用すること


## <a id="iterator" href="#iterator">Iterator</a>

- [GitHub #73](https://github.com/boostorg/iterator/pull/73) C++11以降向けに、`function_output_iterator`に値書き込みの完全転送サポートを追加
- 別の`function_output_iterator`を逆参照した結果を`function_output_iterator`へ書き込んだ場合に対する保護を追加


## <a id="json" href="#json">JSON</a>

- `value::at`に非`const`のオーバーロードを追加
- プラットフォームのエンディアンを手動で選択する機能を追加
- `string::subview()`のオーバーロードを追加
- `array::erase(it)`のセグメンテーション違反を修正
- libc++での`serialize`のパフォーマンス劣化を修正
- GCC 8で`std::string_view`への変換があいまいになる問題を修正
- ビッグエンディアンのプラットフォームでの構文解析を修正
- コメント後のカンマのハンドリングを修正


## <a id="leaf" href="#leaf">LEAF</a>

- <span style="color:red;">**破壊的変更**</span> `throw leaf::exception(....)`を`leaf::throw_exception(....)`に修正
- サポートする稀なビルド設定でのバグを修正 (例外処理は有効だが診断は無効)
- 0の代わりに`nullptr`を使用するよう修正
- ささいな警告を修正


## <a id="locale" href="#locale">Locale</a>

- C++03以下のサポートを非推奨とした。次のリリースからはC++11を要求する
- Boost.Regexと互換性のない`-sICU_LINK`の一時的な置換として`-sICU_LINK_LOCALE`を提供する。 `-sICU_LINK_LOCALE`と`-sICU_LINK`は非推奨になり、Boost.Regexと互換性があるように `ICU_*_NAME`オプションに置き換えられる
- 空の文字列を変換する際のICU `collator`実装内での未定義動作とアサーション失敗を修正
- 共有ライブラリ内のクラスの可視性に関連するいくつかの問題を修正（Unixのみ）
- C++20モードの互換性を修正
- `BOOST_USE_WINDOWS_H`との互換性を修正
- インクルード不足によるビルド失敗を修正
- 多くの警告を処理または抑制し、ビルドログをきれいにした


## <a id="log" href="#log">Log</a>

- バグ修正
    - [GitHub #181](https://github.com/boostorg/log/issues/181) IPv6アドレスがsyslogサーバーに使用されている場合に、UDPソケットベースの`syslog_backend`で誤ったローカルアドレスをバインドする問題を修正
    - GCC 11.2からのlibstdc++の[バグ](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=105857)に対する回避策を追加。`max_size_decor`がformat streamで使用された場合、`std::codecvt::do_length`が誤って入力バッファにアクセスし、バッファオーバーフローを引き起こしていた
- 詳細は[changelog](https://www.boost.org/doc/libs/log/libs/log/doc/html/log/changelog.html)を参照


## テスト済みコンパイラ
主要なテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - Intel:
    - QCC:
- OS X:
    - Apple Clang:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

追加で含まれるテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - GCC, C++11:
    - GCC, C++14:
    - Intel:
    - Intel, C++11:
- OS X:
    - Apple Clang:
    - Apple Clang, C++11:
    - Apple Clang, C++14:
    - Clang:
    - Clang, C++11:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

## 翻訳
[Akira Takahashi](https://github.com/faithandbrave)

