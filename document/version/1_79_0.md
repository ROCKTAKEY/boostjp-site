# Boost 1.79.0リリースノート

本家リリースノート：

- <https://github.com/boostorg/website/blob/master/feed/history/boost_1_79_0.qbk>
- <http://www.boost.org/users/history/version_1_79_0.html>


リポジトリは以下：

- <https://github.com/boostorg/>


リポジトリからのビルド方法は、egtraさんのブログを参照：

- 「[Modularized Boost（GitHubへ移行したリポジトリ）を使用する](http://dev.activebasic.com/egtra/2013/12/03/620/)」


## 新ライブラリ


## 更新ライブラリ

- [Assert](#assert)
- [Atomic](#atomic)
- [Beast](#beast)
- [Core](#core)
- [Describe](#describe)
- [Filesystem](#filesystem)
- [Integer](#integer)
- [IO](#io)


## <a id="assert" href="#assert">Assert</a>

- `source_location().file_name()`と`source_location().function_name()`が、`"(unknown)"`の代わりに`""`を返すようになった
- `source_location`に、`std::source_location`からの変換コンストラクタを追加
- `BOOST_CURRENT_LOCATION`を変更し、トップレベルで使用したり、関数のデフォルト引数として使用したりした場合に、`std::source_location::current()`とより厳密に動作を一致させた


## <a id="atomic" href="#atomic">Atomic</a>

- [GitHub #54](https://github.com/boostorg/atomic/issues/54) Universal Windows Platform (UWP) でのコンパイルを修正
- [GitHub #55](https://github.com/boostorg/atomic/issues/55) 設定マクロ`BOOST_ATOMIC_NO_DARWIN_ULOCK`を追加。このマクロはDarwinシステムでのコンパイルに影響を与え、wait/notify操作の`ulock`ベースの実装を無効にする。これはApple App Storeの要件に準拠するために役立つ場合がある


## <a id="beast" href="#beast">Beast</a>

- `file_body`のテストに不足していたインクルードを追加
- 失敗していたWebSocketハンドシェイクのレスポンスを修正
- `file_posix`と`file_win32`の追記オープンモードを修正
- Windowsでの`append`/`append_existing`フラグ付きでファイルを開く操作を修正
- `file_win32`と`file_stdio`のclang-cl UTF-8ハンドリングを修正
- drone CIでのARM64ビルドを追加
- `async_base`ドキュメントのリンクを修正
- `append`/`append_existing`モードでファイルを開くテストを追加
- gcc 11, clang 12, msvc 14.3を含めるようCIを更新
- CMakeワークフローでの個別テストを追加
- 完全な変更は[Release Notes](https://www.boost.org/doc/libs/release/libs/beast/doc/html/beast/release_notes.html)を参照


## <a id="core" href="#core">Core</a>

- LWG3545に対応し、`boost::pointer_traits`をSFINAEフレンドリーにした (Glen Fernandes氏に感謝)
- 個別のアロケータ特性にアクセスする`boost::allocator_traits`を追加。この実装はC++03以降をサポートする (Glen Fernandes氏に感謝)
- C++03でほとんどのC++11アロケータモデルをサポートするよう、アロケータのアクセス特性を更新 (Glen Fernandes氏に感謝)
- `boost/iterator.hpp`は非推奨となり、将来のリリースで削除される予定。このヘッダは`boost::iterator`を定義し、それは`<iterator>`の`std::iterator`と等価である。しかしこの機能はC++17で非推奨となっているため、ユーザーにはこれらの使用をやめることを勧める
- `boost::core::verbose_terminate_handler`を追加。これは、捕捉されなかった例外を`stderr`に出力する、`std::set_terminate`関数に渡すことを目的としたユーティリティ関数である


## <a id="describe" href="#describe">Describe</a>

- `BOOST_DESCRIBE_STRUCT`での`union`を有効にし、`std::is_union<T>`をチェックするようサンプルコードを更新
- `fmtlib`のクラスフォーマッタを定義するサンプルコードを追加
- `fmtlib`のenumフォーマッタを定義するサンプルコードを追加
- メンバへのポインタを出力するサンプルコードを追加


## <a id="filesystem" href="#filesystem">Filesystem</a>

- v3の`path::replace_extension`は、v4ではなくv3の`path::extension`の定義に関して機能するようになった
- [GitHub #223](https://github.com/boostorg/filesystem/issues/223) `path`または変換可能な文字列型を引数にするパスの追加と連結の演算子のコンパイルを修正
- [GitHub #224](https://github.com/boostorg/filesystem/issues/224) `fdopendir`と`O_NOFOLLOW`をサポートするPOSIXシステムとWindowsでは、`remove_all`が[CVE-2022-21658](https://www.cve.org/CVERecord?id=CVE-2022-21658)から保護されるようになった。この脆弱性は、サードパーティのプロセスが`remove_all`によって同時に処理されるディレクトリをディレクトリシンボリックリンクに置き換え、`remove_all`がシンボリックリンクをたどり、シンボリックリンクを削除する代わりにリンクされたディレクトリ内のファイルを削除することを可能にする競合状態である
- [GitHub #216](https://github.com/boostorg/filesystem/issues/216) Windowsの`remove`と`remove_all`の実装で、OSでサポートされている場合に (Windows 10 1709以降)、ファイルの削除にPOSIXセマンティクスを使用する。POSIXセマンティクスがサポートされている場合、ファイルがまだ開かれていて使用中であっても、ファイルに削除マークがつけられてすぐに、ファイル名はファイルシステム名前空間から削除される。従来のWindowsセマンティクスでは、ファイルへの最後のファイルハンドルが閉じられるまで、ファイル名はファイルシステム名前空間に存在し続ける。これにより、削除のマークが付けられたファイルを開くことができ、同じ名前の新しいファイルが作成されなくなる
- Windowsにおいて、`remove`と`remove_all`で読み取り専用ディレクトリの削除をサポートした。読み取り専用の非ディレクトリファイルの削除サポートは、以前から追加されていた
- Windowsにおいて、`directory_iterator`の内部実装を作り直し、最新のWindows APIを有効に活用できるようになった。これにより、シンボリックリンク処理中のパフォーマンスが向上する可能性がある
- Windowsにおいて、可能であれば内部のWinAPIの関数ポインタを早期に初期化し、Boost.Filesystemの操作をグローバルコンストラクタで呼び出せるようにした。これは、MSVC、GCC、Clang、およびそれらと互換性のあるコンパイラでのみサポートされる
- Windowsにおいて、開かれているファイルに対して`resize_file`した際に、エラーにならないようにした
- [GitHub #229](https://github.com/boostorg/filesystem/issues/229) Androidの11.0 (APIバージョン30) より前での、`statx`システムコールの使用を無効にした。そのシステムコールはseccompによってブラックリストに登録されており、実行時にプロセスが終了してしまう
- 非推奨化 : `boost/filesystem/string_file.hpp`は非推奨となり、将来のリリースから削除される。このヘッダはデフォルトでは`boost/filesystem.hpp`に含まれなくなった。ユーザーは、この機能を自身で実装するか、他の実装に移行することを勧める
- 非推奨化 : Windows CEのサポートは非推奨となり、将来のリリースから削除される。Windows CEは長年テストされておらず、機能していない可能性がある


## <a id="integer" href="#integer">Integer</a>

- [GitHub #31](https://github.com/boostorg/integer/issues/31) 内部でビット演算を使用するよう`integer_log2`の実装を最適化した。これにより、最新のCPUで利用可能なビット命令を使用できる


## <a id="io" href="#io">IO</a>

- ヌルストリームバッファである`boost::io::basic_nullbuf`と、ヌル出力ストリームである`boost::basic_onullstream`を追加 (Glen Fernandes氏に感謝)



## テスト済みコンパイラ
主要なテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - Intel:
    - QCC:
- OS X:
    - Apple Clang:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

追加で含まれるテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - GCC, C++11:
    - GCC, C++14:
    - Intel:
    - Intel, C++11:
- OS X:
    - Apple Clang:
    - Apple Clang, C++11:
    - Apple Clang, C++14:
    - Clang:
    - Clang, C++11:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

## 翻訳
[Akira Takahashi](https://github.com/faithandbrave)

