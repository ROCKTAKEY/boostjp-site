# Boost 1.78.0リリースノート

本家リリースノート：

- <https://github.com/boostorg/website/blob/master/feed/history/boost_1_78_0.qbk>
- <http://www.boost.org/users/history/version_1_78_0.html>


リポジトリは以下：

- <https://github.com/boostorg/>


リポジトリからのビルド方法は、egtraさんのブログを参照：

- 「[Modularized Boost（GitHubへ移行したリポジトリ）を使用する](http://dev.activebasic.com/egtra/2013/12/03/620/)」


## 新ライブラリ

なし

## 更新ライブラリ

- [Assert](#assert)
- [Atomic](#atomic)
- [Beast](#beast)
- [Core](#core)
- [Describe](#describe)
- [DLL](#dll)
- [Predef](#predef)
- [Regex](#regex)
- [System](#system)
- [Utility](#utility)
- [Variant2](#variant2)


## 更新ツール

- [Build](#build)


## <a id="assert" href="#assert">Assert</a>

- `source_location::to_string`を追加


## <a id="atomic" href="#atomic">Atomic</a>

- Androidでの非IPCのwait/notify操作には、プロセスローカルのfutex操作を使用するようにした
- riscv32などのような`SYS_futex_time64`システムコールのみを定義するLinuxターゲットのサポートを追加
- 32ビットx86ターゲットでのClang 8での64ビット型に対する`std::alignment_of`が誤った結果になる問題についてワークアラウンドを追加
- Mac OS 10.12, iOS 10.0, tvOS 10.0, およびwatchOS 3.0以降のDarwinシステムでのwait/notify操作のために、ulockバックエンドを追加
- Windows 8以降をターゲットとした場合に、atomic-type`::always_has_native_wait_notify`と対応する機能テストマクロの間の不一致を修正。このライブラリはパブリックヘッダから直接`WaitOnAddress`と関連するAPIを使用するため、Windows 8以降もしくは`BOOST_USE_WINAPI_VERSION`, `_WIN32_WINNT`, 同様のマクロが定義されている場合、ユーザーは`synchronization.lib`をリンクする必要がある。このライブラリは自動リンクをサポートするコンパイラ (MSVCなど) では自動的にリンクする
- padding bitをクリアする方法を提供するコンパイラにおいて、unionを除くpadding bitをもつ型のサポートを追加。この機能はGCC 11とMSVC 14.2 (コンパイラバージョン19.27) 以降、および同様の組み込み関数をサポートするほかのコンパイラでサポートされる。padding bitをクリアできないコンパイラでは、x86ターゲットの80ビットの`long double`を除いて、padding付きの型は一般にサポートされない。新たな機能マクロ`BOOST_ATOMIC_NO_CLEAR_PADDING`が定義された場合、パディングのクリアがサポートされないことを示す
- `atomic_ref`および`ipc_atomic_ref`の初期化コンストラクタは、参照オブジェクトのpadding bitをクリアするためにアトミック命令を使用するのをやめた。これによりatomic refの構築コストが削減される
- `atomic`および`ipc_atomic`の初期化コンストラクタは、列挙型、クラス、浮動小数点数型に対して`constexpr`になった。クラスと浮動小数点数型の場合、コンパイラが`constexpr`の`std::bit_cast`をサポートし、型にpadding bitがなく、ネイティブのアトミック操作を実装するためにpaddingが必要ない場合に、`constexpr`になる
- C++20に従って、`atomic`および`ipc_atomic`のデフォルトコンストラクタは、含まれているオブジェクトの値初期化を実行するようにした。ユーザー定義のデフォルトコンストラクタがない場合、デフォルト構築されたアトミックオブジェクトはゼロで初期化されることを意味する
- [GitHub #50](https://github.com/boostorg/atomic/pull/50) アセンブラツールがnumeric labelをサポートしていないために発生するAIXでのコンパイルエラーのワークアラウンドを追加
- [GitHub #52](https://github.com/boostorg/atomic/issues/52) Visual Studio 2015 Update 3以前でのコンパイルエラーのワークアラウンドを追加
- より詳細は[changelog](https://www.boost.org/doc/libs/release/doc/html/atomic/limitations.html)を参照


## <a id="beast" href="#beast">Beast</a>

- 今回は小さなバグ修正とCI報告の更新を行うメンテナンスアップデートである
- zlibのセキュリティ脆弱性CVE-2016-9840を修正
- WebSocketの`permessage_deflate`の実装を修正。これにより、Beast WebSocketを使用する際の圧縮のパフォーマンスが向上するだろう
- テストストリームとテストフレームワークのRTTIへの依存をなくした。これにより、自身の便利なテストストリームを使用し、埋め込まれた非同期通信コードを確認できる
- 完全な変更は[Release Notes](https://www.boost.org/doc/libs/release/libs/beast/doc/html/beast/release_notes.html)を参照


## <a id="core" href="#core">Core</a>

- `BOOST_CORE_USE_GENERIC_CMATH`が定義されるか、もしくはプラットフォームが`<cmath>`に必要な機能を提供していない場合に有効になる汎用実装を`<boost/core/cmath.hpp>`に追加
- 型の名前を文字列として返すユーティリティ関数`boost::core::type_name`を追加
- C++20の`std::span`のC++11実装である`boost::span`を追加 (Glen Fernandes氏に感謝)


## <a id="describe" href="#describe">Describe</a>

- `has_describe_enumerators`, `has_describe_bases`, `has_describe_members`を追加
- `enum_to_string`, `enum_from_string`を追加
- 関係演算子とストリーム入力演算子を追加
- `descriptor_by_name`, `descriptor_by_pointer`を追加


## <a id="dll" href="#dll">DLL</a>

- [GitHub #54](https://github.com/boostorg/dll/pull/54) 不足していた`#include`を修正 (Denis Blank氏に感謝)
- GitHub Action CIを優先し、Travis CIを削除


## <a id="predef" href="#predef">Predef</a>

- バージョン1.13.1
- "epoch"のつづりを修正
- sparc.h内での欠落していたカッコを追加 (tkoecker氏に感謝)
- ドキュメントを更新し、RougeコードスタイルとAmber汎用スタイルを使用するようにした


## <a id="regex" href="#regex">Regex</a>

- <span style="color:red;">**破壊的変更**</span> Perlの動作に従って、`\B`を`\b`の反対になるよう変更
- `w32_regex_traits.hpp`で`windows.h`をインクルードしないよう変更
- 以下の問題を修正
    - [GitHub #151](https://github.com/boostorg/regex/issues/151) 大文字・小文字変更グループの繰り返しを、アサーション失敗からエラーに変更
    - [GitHub #152](https://github.com/boostorg/regex/issues/152) [GitHub #156](https://github.com/boostorg/regex/issues/156) `(*SKIP)`で見る際の再帰内のスタック巻き戻しを正しく修正
    - [GitHub #153](https://github.com/boostorg/regex/issues/153) `boost::regex_match`のメモリリークを修正


## <a id="system" href="#system">System</a>

- `error_code`のsource locationサポートを追加
- `error_code::to_string`, `error_condition::to_string`, `error_code::what`を追加
- source locationをもつ場合に`system_error::what()`にその情報が含まれるようにした
- `<boost/system/result.hpp>`に、値かエラーのいずれかを保持する`result<T, E = error_code>`クラスを追加


## <a id="utility" href="#utility">Utility</a>

- [GitHub #79](https://github.com/boostorg/utility/pull/79) ライブラリドキュメントをQuickBookに変換 (Alan de Freitas氏に感謝)


## <a id="variant2" href="#variant2">Variant2</a>

- `<boost/variant2.hpp>`を追加
- `unsafe_get<I>`を追加
- `visit_by_index`を追加
- `operator<<`を追加


## <a id="build" href="#build">Build</a>

- B2 version 4.7.2をリリース


## テスト済みコンパイラ
主要なテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - Intel:
    - QCC:
- OS X:
    - Apple Clang:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

追加で含まれるテストコンパイラ:

- Linux:
    - Clang:
    - GCC:
    - GCC, C++11:
    - GCC, C++14:
    - Intel:
    - Intel, C++11:
- OS X:
    - Apple Clang:
    - Apple Clang, C++11:
    - Apple Clang, C++14:
    - Clang:
    - Clang, C++11:
    - GCC:
    - Intel:
- Windows:
    - GCC, mingw:
    - Visual C++:
- FreeBSD:
    - GCC:
- QNX:
    - QCC:

## 翻訳
[Akira Takahashi](https://github.com/faithandbrave)

